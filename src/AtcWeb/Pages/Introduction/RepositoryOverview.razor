@page "/introduction/repository-overview"

@inherits RepositoryOverviewBase

<DocsPage MaxWidth="MaxWidth.Large">
    <DocsPageHeader Title="Repository overview"
                    SubTitle="This is the overview of all atc repositories.">
    </DocsPageHeader>
    <DocsPageContent>
        @if (repositories is null)
        {
            <MudGrid Justify="Justify.Center">
                <MudProgressCircular Color="Color.Primary" Size="Size.Medium" Indeterminate="true" />
            </MudGrid>
        }
        else
        {
            foreach (var repository in repositories)
            {
                <DocsPageSection>
                    <SectionHeader Title="@repository.BaseData.Name">
                        <SubTitle>@repository.BaseData.Description</SubTitle>
                        <Description>@repository.Description</Description>
                    </SectionHeader>
                    <SectionContent AutoMarginContent="false" FullWidth="true" DarkenBackground="true">
                        <MudSimpleTable>
                            <thead>
                                <tr>
                                    <th style="width: 25%">General Project Info</th>
                                    <th style="width: 25%">Packages</th>
                                    <th style="width: 25%">Build Status</th>
                                    <th style="width: 25%">Code Quality</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <ul>
                                            @foreach (var (_, key, url) in repository.Badges.Where(x => x.Group == "General Project Info"))
                                            {
                                                <li><img src="@url" alt="@key" /></li>
                                            }
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            @foreach (var (_, key, url) in repository.Badges.Where(x => x.Group == "Packages"))
                                            {
                                                <li><img src="@url" alt="@key" /></li>
                                            }
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            @foreach (var (_, key, url) in repository.Badges.Where(x => x.Group == "Build Status"))
                                            {
                                                <li><img src="@url" alt="@key" /></li>
                                            }
                                        </ul>
                                    </td>
                                    <td>
                                        <ul>
                                            @foreach (var (_, key, url) in repository.Badges.Where(x => x.Group == "Code Quality"))
                                            {
                                                <li><img src="@url" alt="@key" /></li>
                                            }
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </MudSimpleTable>
                        <ul>
                            <li>HasRootReadme: @repository.HasRootReadme</li>

                            <li>HasWorkflowPreIntegration: @repository.HasWorkflowPreIntegration</li>
                            <li>HasWorkflowPostIntegration: @repository.HasWorkflowPostIntegration</li>
                            <li>HasWorkflowRelease: @repository.HasWorkflowRelease</li>

                            <li>HasCodingRulesEditorConfigRoot: @repository.HasCodingRulesEditorConfigRoot</li>
                            <li>HasCodingRulesEditorConfigSrc: @repository.HasCodingRulesEditorConfigSrc</li>
                            <li>HasCodingRulesEditorConfigTest: @repository.HasCodingRulesEditorConfigTest</li>

                            <li>HasDotnetSolution: @repository.HasDotnetSolution</li>
                            <li>HasDotnetDirectoryBuildPropsRoot: @repository.HasDotnetDirectoryBuildPropsRoot</li>
                            <li>HasDotnetDirectoryBuildPropsSrc: @repository.HasDotnetDirectoryBuildPropsSrc</li>
                            <li>HasDotnetDirectoryBuildPropsTest: @repository.HasDotnetDirectoryBuildPropsTest</li>
                        </ul>
                        <MudCard>
                            @if (repository.Root.HasReadme)
                            {
                                <MudCardContent>
                                    <MarkdownContent Content="@repository.Root.RawReadme" />
                                </MudCardContent>
                            }
                            else
                            {
                                <MudCardContent>No content for readme!</MudCardContent>
                            }
                        </MudCard>
                        <MudCard>
                            <MudCardContent>
                                <ul>
                                    @foreach (var d1 in repository.FoldersAndFiles.Directories)
                                    {
                                        <li>@d1.Name</li>
                                        @foreach (var d2 in d1.Directories)
                                        {
                                            <li>- @d2.Name</li>
                                            @foreach (var d3 in d2.Directories)
                                            {
                                                <li>-- @d3.Name</li>
                                            }
                                        }
                                    }
                                </ul>
                            </MudCardContent>
                        </MudCard>
                    </SectionContent>
                </DocsPageSection>
            }
        }
    </DocsPageContent>
</DocsPage>