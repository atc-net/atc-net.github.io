@page "/introduction/repository-overview"

@using AtcWeb.Styles

@inherits RepositoryOverviewBase

<DocsPage MaxWidth="MaxWidth.Large">
    <DocsPageHeader Title="Repository overview"
                    SubTitle="This is the overview of all atc repositories.">
    </DocsPageHeader>
    <DocsPageContent>
        @if (Repositories is null)
        {
            <MudGrid Justify="Justify.Center">
                <MudProgressCircular Color="Color.Primary" Size="Size.Medium" Indeterminate="true" />
            </MudGrid>
        }
        else
        {
            foreach (var repository in Repositories.OrderBy(x => x.Name))
            {
                var iconSrc = ImageHelper.GetProgramIconPathForLanguage(repository.BaseData.Language);

                <DocsPageSection>
                    <SectionHeader Title="@repository.Name">
                        <SubTitle>
                            <MudElement HtmlTag="div"
                                        Class="d-flex items-center">
                                <img src="@iconSrc" width="22" height="22" alt="$repository.BaseData.Language" />
                                <MudText Class="ml-2"
                                         Inline="true">
                                    @repository.Description
                                </MudText>
                            </MudElement>
                        </SubTitle>
                    </SectionHeader>
                    <SectionContent AutoMarginContent="false" FullWidth="true">
                        <MudCard>
                            @if (repository.Root.HasReadme)
                            {
                                <MudCardContent>
                                    <MarkdownContent Content="@repository.Root.RawReadme" />
                                </MudCardContent>
                            }
                            else
                            {
                                <MudCardContent>There is no readme.md in this repository yes, sorry.</MudCardContent>
                            }
                        </MudCard>
                    </SectionContent>
                </DocsPageSection>
            }
        }
    </DocsPageContent>
</DocsPage>